# LightEdit – Android 图片编辑应用（TT-IC-Camera 客户端工程训练营）

本项目是 **「客户端工程训练营（TT-IC-Camera）」** 的 Android 端实现，目标是开发一款基于 Kotlin 的轻量级图片编辑 App，覆盖从 **相册选图 / 相机拍照 → 图像编辑 → 保存到相册（带水印）** 的完整链路。

项目除了实现要求中的所有核心功能外，还重点体现：

- 工程化流程：Git 工作流、规范化分支
- 模块化架构：UI / Data / Editor / Core 分层  

> 截止时间：**2024-12-04**（在此之前完成全部功能、测试与集成，并提交 GitHub 仓库 + 文档 + 视频）

---

## 1. 项目背景与目标

### 1.1 项目背景

在移动互联网时代，图片编辑工具广泛应用于社交分享、工作汇报和创意设计等场景。本作业以 **“轻量高效、功能实用、体验流畅”** 为核心定位，要求完成一个面向大众用户的图片编辑 App。

### 1.2 项目目标

- **技术目标**
  - 熟练使用 **Kotlin + Android** 完成客户端开发；
  - 实现图像的加载、处理、保存等核心能力；
  - 掌握性能优化（相册流畅度、编辑响应速度、内存控制等）；
  - 正确处理权限、存储失败、无相机等异常场景。

- **产品目标**
  - 实现一款功能完整、操作简洁、运行稳定的图片编辑工具；
  - 满足用户基础编辑需求（裁剪、旋转、文字、调节等）；
  - 拥有良好的易用性与一定的扩展性（支持加分功能扩展）。

---

## 2. 技术栈与架构

- 开发语言：Kotlin
- 开发工具：Android Studio
- 最低系统版本：Android 10（API 29）
- 架构模式：单 Activity + 多 Fragment
- UI 技术：原生 View、ViewBinding、RecyclerView、自定义 View
- 系统能力：
  - MediaStore 相册查询与图片保存
  - 系统相机拍照（Activity Result API）
  - 运行时权限（相册 / 相机 / 存储）

说明：项目中未使用第三方图像处理库，裁剪、缩放、旋转、亮度/对比度、文字叠加、合成保存均为手动实现。仅使用 AndroidX、Material 等官方支持库。

> 关于 iOS 端：作业要求中包含 iOS 兼容性，但本仓库专注 **Android 客户端实现**。iOS 相关内容将只在技术文档中进行架构和跨平台设计层面的简要讨论，不做实际实现。

---

## 3. 功能完成情况

### 3.1 核心功能

- [x] 相册选图模块：
  - [x] 加载本地图片
  - [x] 实现两个tab(全部/按文件夹)展示图片
  - [x] 使用LRU和线程异步展示缩略图,
  - [x] 支持直接点击图片进入编辑界面
  - [x] 图片预览：支持从缩略图进入大图预览
- [x] 相机拍照模块：
  - [x] 支持调用相机拍摄图像并直接导入编辑界面
  - [x] 处理相机权限申请及设备无相机的异常
- [x] 图片编辑：
  - [x] 缩放 (缩放、平移)
  - [x] 裁剪（多种比例 + 自由裁剪）
  - [x] 旋转 / 翻转
  - [x] 调色（亮度 & 对比度，支持按住对比原图）
  - [x] 文字：多字体、多颜色、字号、透明度，支持拖动、缩放、旋转
  - [x] 工具栏动画 (额外)
- [x] 保存：合成当前画面 + “训练营”水印，保存到系统相册

### 3.2 扩展功能

- [x] 扩展 1：动画过渡
  - 从相册缩略图进入大图预览时，使用共享元素动画，保证图片缩放 & 位移动画顺滑。
- [x] 扩展 2：滤镜功能
  - 内置 6 种滤镜：原图、黑白、复古、清新、暖色、冷色。
  - 滤镜效果手动实现（基于像素运算）。
- [x] 扩展 3：贴纸功能
  - 内置 10+ 贴纸
  - 贴纸支持拖动、缩放、旋转。
  - 贴纸层级支持置顶、置底、前移一层、后移一层。

- [ ] 扩展 4：图像拼接功能（未实现）
- [ ] 扩展 5：夜间模式（未实现）
- [ ] 扩展 6：分享至抖音模块（未实现）

---

## 4. 运行 & 构建

1. 使用 Android Studio 打开项目工程。  
2. 连接 Android 10（API 29）及以上设备，或启动对应模拟器。  
3. 点击运行（Run）。  
4. 应用启动时会提示授予以下权限：  
   - 相册访问权限  
   - 存储写入权限（部分版本自动处理）  
   - 相机权限（仅拍照时需要）  


---

## 5. 使用说明（测试路径）

1. 打开 App，进入首页：
   - 点击「相册」进入相册列表
   - 点击「拍照」调用拍照功能

2. 在相册界面：
   - 点击「全部图片」展示所有照片
   - 点击「按文件夹」展示照片文件夹，选择「文件夹」，按文件夹过滤照片
    
   - 点击图片右下角「图标」，进入大图预览界面
   - 点击图片，进入编辑界面
   
2. 在大图预览界面：
   - 点击「编辑这张图片」进入编辑界面
3. 在编辑界面：
   - 使用「裁剪 / 旋转 / 调色 / 滤镜 / 文字 / 贴纸」工具进行编辑。
   - 点击右上角「保存」：保存到系统相册并自动返回至相册列表。

---

## 6. Git 工作流说明

本项目使用简化版 Git Flow：

- main：稳定可发布版本  
- develop：整合日常开发  
- feature/xxx：按功能模块建立，如 feature/editor-text  
- hotfix/xxx：基于 main 分支的紧急修复  

详细流程记录在仓库的 git-workflow.md 中。

---

## 7. 说明

本项目仅用于课程学习与作业提交，不用于商业用途。
